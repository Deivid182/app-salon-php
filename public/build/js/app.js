let step=1;const minStep=1,maxStep=3,appointment={name:"",date:"",time:"",services:[]};document.addEventListener("DOMContentLoaded",()=>{initApp()});const initApp=()=>{showSection(),tabs(),onChange(),onPrev(),onNext(),queryApi(),getName(),selectDate(),selectTime(),showSummary()},tabs=()=>{document.querySelectorAll(".tabs button").forEach(e=>{e.addEventListener("click",e=>{step=parseInt(e.target.dataset.step),showSection(),onChange()})})},showSection=()=>{const e=document.querySelector(".show");e&&e.classList.remove("show");document.querySelector("#step-"+step).classList.add("show");const t=document.querySelector(".active");t&&t.classList.remove("active");document.querySelector(`.tabs button[data-step="${step}"]`).classList.add("active")},onChange=()=>{const e=document.querySelector("#next"),t=document.querySelector("#prev");1===step?(t.classList.add("hide"),e.classList.remove("hide")):3===step?(t.classList.remove("hide"),e.classList.add("hide")):(t.classList.remove("hide"),e.classList.remove("hide")),showSection()},onPrev=()=>{console.log("onPrev");document.querySelector("#prev").addEventListener("click",()=>{step<=1||(step--,onChange())})},onNext=()=>{console.log("onNext");document.querySelector("#next").addEventListener("click",()=>{step>=3||(step++,onChange())})},queryApi=async()=>{try{const e="http://localhost:3000/api/services",t=await fetch(e),s=await t.json();showServices(s)}catch(e){console.log(e)}},showServices=e=>{e.forEach(e=>{const{name:t,id:s,price:o}=e,c=document.createElement("p");c.classList.add("name-service"),c.textContent=t;const n=document.createElement("p");n.classList.add("price-service"),n.textContent="$"+o;const a=document.createElement("div");a.classList.add("service"),a.dataset.id=s,a.onclick=()=>selectService(e),a.appendChild(c),a.appendChild(n),document.querySelector("#services").appendChild(a)})},selectService=e=>{appointment.services.some(t=>t.id===e.id)?(appointment.services=appointment.services.filter(t=>t.id!==e.id),document.querySelector(`[data-id="${e.id}"]`).classList.remove("service-selected")):(appointment.services=appointment.services.concat(e),document.querySelector(`[data-id="${e.id}"]`).classList.add("service-selected"))},getName=()=>{appointment.name=document.querySelector("#name").value},selectDate=()=>{document.querySelector("#date").addEventListener("input",e=>{const t=new Date(e.target.value);[5,6].includes(t.getDay())?(e.target.value="",showAlert("Weekends are not available","error")):appointment.date=e.target.value})},selectTime=()=>{const e=document.querySelector(".alert");e&&e.remove();document.querySelector("#time").addEventListener("input",e=>{const t=e.target.value.split(":")[0];t<10||t>18?(e.target.value="",showAlert("We are only open from 10am to 6pm","error")):appointment.time=e.target.value})},showAlert=(e,t)=>{const s=document.querySelector(".alert");s&&s.remove();const o=document.createElement("div");o.textContent=e,o.classList.add("alert","alert-"+t),document.querySelector("#step-2 p").appendChild(o),setTimeout(()=>{o.remove()},3e3)},showSummary=()=>{document.querySelector(".summary")};